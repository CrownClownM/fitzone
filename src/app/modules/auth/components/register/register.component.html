<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
  <mat-card-content class="fields">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput type="text" formControlName="name" />
      @if(loginForm.get('name')?.errors?.['required'] && loginForm.get('name')?.touched) {
      <mat-error>
        El nombre es obligatorio
      </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Email</mat-label>
      <input matInput type="email" formControlName="email" placeholder="tu@email.com" />
      @if(loginForm.get('email')?.errors?.['required'] && loginForm.get('email')?.touched) {
      <mat-error>
        El email es obligatorio
      </mat-error>
      }
      @if(loginForm.get('email')?.errors?.['email'] && loginForm.get('email')?.touched) {
      <mat-error>
        Ingrese un correo válido
      </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput [type]="showPassword ? 'text' : 'password'" formControlName="password" />
      <button mat-icon-button matSuffix type="button" (click)="showPassword = !showPassword">
        <mat-icon>{{
          showPassword ? 'visibility_off' : 'visibility'
          }}</mat-icon>
      </button>
      @if(loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
      <mat-error>
        La contraseña es obligatoria
      </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Verificar contraseña</mat-label>
      <input matInput [type]="showVerifyPassword ? 'text' : 'password'" formControlName="verifyPassword" />
      <button mat-icon-button matSuffix type="button" (click)="showVerifyPassword = !showVerifyPassword">
        <mat-icon>{{
          showPassword ? 'visibility_off' : 'visibility'
          }}</mat-icon>
      </button>
      @if(loginForm.get('verifyPassword')?.invalid && loginForm.get('verifyPassword')?.touched) {
      <mat-error>
        La contraseña es obligatoria
      </mat-error>
      }
      @if(loginForm.errors?.['passwordMismatch'] && loginForm.get('verifyPassword')?.touched) {
      <mat-error>
        Las contraseñas no coinciden
      </mat-error>
      }
    </mat-form-field>
  </mat-card-content>

  <mat-card-actions class="actions">
    <button mat-flat-button class="full-width" [disabled]="isLoading">
      {{ isLoading ? 'Registrandose...' : 'Registrarse' }}
    </button>
    <div class="register-text">
      ¿Ya tienes una cuenta?
      <a routerLink="/auth/login">Inicia sesión aquí</a>
    </div>
  </mat-card-actions>
</form>
